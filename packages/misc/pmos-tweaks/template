# Template file for 'pmos-tweaks'
pkgname=pmos-tweaks
version=0.11.0
revision=1
build_style=meson
makedepends="libhandy1-devel"
hostmakedepends="pkg-config"
depends="libhandy1 python3-gobject python3-yaml"
short_desc="Application for exposing extra settings easily on mobile platforms"
maintainer="Jami Kettunen <jami.kettunen@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://gitlab.com/postmarketOS/postmarketos-tweaks"
distfiles="${homepage}/-/archive/${version}/postmarketos-tweaks-${version}.tar.gz"
wrksrc="postmarketos-tweaks-${version}"
checksum=82e6494a7434ad1b94c5bf762a7ae9f758bf2f1cc82dbd05de8c64af2738a241

_ymldir="usr/share/postmarketos-tweaks"
_vmove_yml() { vmove ${_ymldir}/$1.yml; }

post_install() {
	# unused OpenRC service file(s)
	rm -r "$DESTDIR"/etc/init.d

	# unused pmOS initramfs osk-sdl menu
	rm "$DESTDIR/${_ymldir}"/unlocker.yml

	vlicense LICENSE
	vsv pmos-tweakd
}

pmos-tweaks-phosh_package() {
	short_desc+=" - Phosh entries"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		_vmove_yml phosh
	}
}

pmos-tweaks-pinephone_package() {
	short_desc+=" - PinePhone entries"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		_vmove_yml pinephone
	}
}
