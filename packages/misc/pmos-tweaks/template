# Template file for 'pmos-tweaks'
pkgname=pmos-tweaks
version=0.13.0
revision=1
build_style=meson
makedepends="libhandy1-devel"
hostmakedepends="pkg-config"
depends="libhandy1 python3-gobject python3-yaml"
short_desc="Application for exposing extra settings easily on mobile platforms"
maintainer="Jami Kettunen <jami.kettunen@protonmail.com>"
license="GPL-3.0-or-later"
homepage="https://gitlab.com/postmarketOS/postmarketos-tweaks"
distfiles="https://gitlab.com/postmarketOS/postmarketos-tweaks/-/archive/${version}.tar.gz"
checksum=a30009515920b4526b5bf3d25ffadf89d562bb7d87a2e49e2a7b18ade7248a93

_ymldir="usr/share/postmarketos-tweaks"
_vmove_yml() { vmove ${_ymldir}/$1.yml; }

post_install() {
	# unused OpenRC service file(s)
	rm -r "$DESTDIR"/etc/init.d

	# unused pmOS initramfs osk-sdl menu
	rm "$DESTDIR/${_ymldir}"/unlocker.yml

	vlicense LICENSE
	vsv pmos-tweakd
}

pmos-tweaks-phosh_package() {
	short_desc+=" - Phosh entries"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		_vmove_yml phosh
	}
}

pmos-tweaks-pinephone_package() {
	short_desc+=" - PinePhone entries"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		_vmove_yml pinephone
	}
}

pmos-tweaks-sxmo_package() {
	short_desc+=" - Sxmo (X11) entries"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		_vmove_yml sxmo-x11
	}
}
